import{r as Q}from"./validators-BJEf8OaU.js";import{w as W,d as q,r as k,o as N,g as A,f as h,b as c,n as u,b1 as X,v as E,x as F,e as w,V,aY as Y,ak as U,c as _,z as P,a as Se,b0 as Oe,F as J,i as ee,s as ze,c$ as re,d0 as G,y as Le,b7 as Fe}from"./main-4HtaUiFJ.js";import{_ as Ke}from"./AppSelect.vue_vue_type_script_setup_true_lang-C__P85TY.js";import{_ as Me}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-CQF3R3j1.js";import{_ as Ue}from"./AppTextField.vue_vue_type_script_setup_true_lang-CgXasaHP.js";import{_ as Re}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-G_jZklFa.js";import{u as He,S as Ze,P as We,U as Xe,E as Ye}from"./index-DXpFself.js";import{T as Je}from"./index-D9AJTfN2.js";import{C as qe}from"./vue3-perfect-scrollbar-CbwDZVVd.js";import{a as je}from"./avatar-1-mrBiEG2D.js";import{a as Ge}from"./avatar-2-J3iDMrW6.js";import{a as Qe}from"./avatar-3-CCfT4M2Q.js";import{a as et}from"./avatar-4-CkT0aFRW.js";import{a as tt}from"./avatar-5-roKDnu6B.js";import{a as at}from"./avatar-6-D6_LJK0H.js";import{V as nt}from"./VDivider-BTqHSpsX.js";import{V as te}from"./VForm-DfyEv3E_.js";import{V as me}from"./VCardText-BPW3eqxe.js";import{V as ot,a as M}from"./VRow-D3BW0X_c.js";import{V as pe}from"./VChip-C3dJwiwV.js";import{V as rt}from"./VSelect-VZZmIpKC.js";import{V as ge}from"./VAvatar-DqZM1Z9r.js";import{V as le}from"./VImg-_vWB6Zwl.js";import{V as he}from"./VTooltip-n36RNktB.js";import{V as lt}from"./VFileInput-BbDcPks8.js";import{V as st}from"./VNavigationDrawer-BrvdEhMP.js";import{_ as it}from"./MoreBtn.vue_vue_type_script_setup_true_lang-mRbBNpSj.js";import{V as dt}from"./VSpacer-BllJwegc.js";import{V as ct}from"./VMenu-C6o_MB5q.js";import{V as ut}from"./VList-BswckCF8.js";import{V as ft}from"./VCard-BmDiRtzo.js";import{_ as mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as be}from"./VTextField-B9XLf_50.js";import{V as pt}from"./VTextarea-B76u1sj1.js";import{u as gt}from"./useApi-Cirfv19R.js";import{$ as z}from"./api-C_4U8U9x.js";import"./helpers-BGv4x_9E.js";import"./form-DFwA6hGK.js";import"./VField-BAjGSKE3.js";import"./easing-CjukEv2V.js";import"./VInput-BFY35E5e.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              */import"./VSlideGroup-CJyjfXC_.js";import"./dialog-transition-DGxvWnIv.js";import"./VOverlay-C0_cIW55.js";import"./delay-B6n6jnpn.js";import"./lazy-Df-tM7SF.js";import"./scopeId-DbRFQ7mK.js";import"./VCheckboxBtn-BubYvrdx.js";import"./VSelectionControl-BM0pCinx.js";import"./VCounter-1zqnpjd5.js";import"./ssrBoot-Dof1CZuO.js";/* empty css                   */import"./index-9rIf2CJL.js";function ht(e,t){var a=!1;return function(...n){a||(e.call(null,...n),a=!0,setTimeout(function(){a=!1},t))}}function ve(e){return e.split(" ").filter(t=>t)}var De=typeof window<"u";function R(e,t,a=!1){if(!t)return;const n=ve(t);if(n.length&&!n.includes("longTouch"))for(const o of e){if(!j(o)||!$.has(o)){o.classList.add(...n);continue}const l=[],r=$.get(o);if(r){for(const s of n)o.classList.contains(s)?o.classList.contains(s)&&a===!1&&l.push(s):o.classList.add(s);r.privateClasses=l,$.set(o,r)}}}function ae(e,t){if(!t)return;const a=ve(t);if(a.length)for(const n of e){if(!j(n)){n.classList.remove(...a);continue}const o=$.get(n);if(o)for(const l of a)o.privateClasses.includes(l)||n.classList.remove(l)}}function ye(e){let t=e.parentNode;for(;t!==null&&t.nodeType===1&&t instanceof HTMLElement;){const n=window.getComputedStyle(t).getPropertyValue("overflow");if(n==="scroll"||n==="auto")return t;t=t.parentNode}return document.documentElement}function bt(e){if(!(e.e instanceof TouchEvent))return;const t=e.e.touches[0].clientX,a=e.e.touches[0].clientY;let n=document.elementFromPoint(t,a);if(!j(n))return;let o,l=!0;for(;n&&l;){if($.has(n)||B.has(n)){l=!1,o=B.has(n);break}n=n.parentNode}if(o){const r=B.get(n);return r?{parent:{el:n,data:r}}:void 0}else{const r=$.get(n);if(!r)return;const s=B.get(n.parentNode);return s?{node:{el:n,data:r},parent:{el:n.parentNode,data:s}}:void 0}}function j(e){return e instanceof HTMLElement&&e.parentNode instanceof HTMLElement}function Ne(e,t){const a=new AbortController;for(const n in t){const o=t[n];e.addEventListener(n,o,{signal:a.signal,passive:!1})}return a}function we(e,t,a=!1){const n=window.getComputedStyle(e),o=["position","z-index","top","left","x","pointer-events","y","transform-origin","filter","-webkit-text-fill-color"];for(const l of Array.from(n))a===!1&&l&&o.includes(l)||t.style.setProperty(l,n.getPropertyValue(l),n.getPropertyPriority(l));for(const l of Array.from(e.children)){if(!j(l))continue;const r=t.children[Array.from(e.children).indexOf(l)];we(l,r,a)}}function H(e){return e instanceof DragEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY}}Array();function ke(e={}){const t=[{transform:`translateY(${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],a=[{transform:`translateY(-${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],n=[{transform:`translateX(${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}],o=[{transform:`translateX(-${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}];return l=>{if(B.get(l))return{setup(){document.head.querySelector("[data-drag-and-drop]")},setupNodeRemap(s){if(!i)return;const d=e.duration||150;if(s.nodeData.value===i.draggedNode.data.value){switch(i.incomingDirection){case"below":O(s.node,t,d);break;case"above":O(s.node,a,d);break;case"left":O(s.node,o,d);break;case"right":O(s.node,n,d);break}return}if(!i.affectedNodes.map(C=>C.data.value).includes(s.nodeData.value))return;const f=s.node.getBoundingClientRect(),g=i.affectedNodes.findIndex(C=>C.data.value===s.nodeData.value),T=i.draggedNode.data.index>=i.targetIndex;let m;if(T?m=i.affectedNodes[g+1]?i.affectedNodes[g+1]:i.affectedNodes[g-1]:m=i.affectedNodes[g-1]?i.affectedNodes[g-1]:i.affectedNodes[g+1],m){const C=Math.abs(f.x-m.el.getBoundingClientRect().x),I=Math.abs(f.y-m.el.getBoundingClientRect().y);C>I&&T?O(s.node,o,d):C>I&&!T&&O(s.node,n,d)}else switch(i.incomingDirection){case"below":O(s.node,a,d);break;case"above":O(s.node,t,d);break;case"left":O(s.node,n,d);break;case"right":O(s.node,o,d);break}}}}}function O(e,t,a){i&&(i.preventEnter=!0,e.animate(t,{duration:a}),setTimeout(()=>{i&&(i.preventEnter=!1)},a))}Array();Array();var ue={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},$=new WeakMap,B=new WeakMap,i=void 0;function vt(){i=void 0}function Te(e){return i={ascendingDirection:!1,incomingDirection:void 0,enterCount:0,targetIndex:0,affectedNodes:[],lastValue:void 0,activeNode:void 0,lastTargetValue:void 0,remapJustFinished:!1,preventEnter:!1,clonedDraggedEls:[],originalZIndex:void 0,transferred:!1,...e},i}function Dt(e,t){return i={...e,...t},i}function xe(e){const{x:t,y:a}=H(e.e);return{coordinates:{x:t,y:a},draggedNode:{el:e.targetData.node.el,data:e.targetData.node.data},draggedNodes:[{el:e.targetData.node.el,data:e.targetData.node.data}],initialIndex:e.targetData.node.data.index,initialParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},lastParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},scrollParent:ye(e.targetData.node.el)}}function yt(e,t){const a=Ie(e),o=[...se(t.targetData.parent.el,t.targetData.parent.data).filter(l=>!a.includes(l))];o.splice(t.targetData.node.data.index,0,...a),e.lastTargetValue=t.targetData.node.data.value,ie(t.targetData.parent.el,t.targetData.parent.data,[...o])}function se(e,t){return[...t.getValues(e)]}function ie(e,t,a){t.setValues(a,e)}function Ie(e){return[...e.draggedNodes.map(t=>t.data.value)]}function Nt({parent:e,getValues:t,setValues:a,config:n={}}){var r,s,d;if(!De)return;document.addEventListener("dragover",f=>{if(f.preventDefault(),!($.has(f.target)||B.has(f.target))&&i){i.remapJustFinished=!1,i.lastTargetValue=void 0;const{x:g,y}=H(f);i.coordinates.y=y,i.coordinates.x=g,ne()}}),wt(e);const o={getValues:t,setValues:a,config:{handleDragstart:It,handleDragoverNode:jt,handleDragoverParent:Gt,handleEnd:_e,handleTouchstart:zt,handleTouchmove:Mt,handleTouchOverNode:Et,handleTouchOverParent:Qt,handleDragenterNode:ta,handleDragleaveNode:aa,performSort:yt,performTransfer:Ae,root:document,setupNode:Bt,setupNodeRemap:Ce,reapplyDragClasses:At,tearDownNode:St,tearDownNodeRemap:$t,remapFinished:xt,scrollBehavior:{x:.8,y:.8},threshold:{horizontal:0,vertical:0},...n},enabledNodes:[],abortControllers:{}};new MutationObserver(Tt).observe(e,{childList:!0}),B.set(e,o),(r=n.plugins)==null||r.forEach(f=>{var g,y;(y=(g=f(e))==null?void 0:g.tearDown)==null||y.call(g)}),(s=n.plugins)==null||s.forEach(f=>{var g,y;(y=(g=f(e))==null?void 0:g.tearDown)==null||y.call(g)}),(d=n.plugins)==null||d.forEach(f=>{var g,y;(y=(g=f(e))==null?void 0:g.setup)==null||y.call(g)}),kt(e,o),de(e,!0)}function wt(e){const t=B.get(e);t&&t.abortControllers.mainParent&&t.abortControllers.mainParent.abort()}function kt(e,t){t.abortControllers.mainParent=Ne(e,{dragover:ra(ht(t.config.handleDragoverParent,10)),touchOverParent:t.config.handleTouchOverParent})}function Tt(e){const t=e[0].target;t instanceof HTMLElement&&de(t)}function de(e,t){const a=B.get(e);if(!a)return;const n=[],o=a.config;for(let s=0;s<e.children.length;s++){const d=e.children[s];if(!j(d))continue;const f=$.get(d);(t||!f)&&o.tearDownNode({node:d,parent:e,nodeData:f,parentData:a}),!o.disabled&&(!o.draggable||o.draggable&&o.draggable(d))&&n.push(d)}if(n.length!==a.getValues(e).length&&!o.disabled){console.warn("The number of enabled nodes does not match the number of values.");return}const l=a.getValues(e),r=[];for(let s=0;s<n.length;s++){const d=n[s],f=$.get(d),g=Object.assign(f??{privateClasses:[],abortControllers:{}},{value:l[s],index:s});if(i&&g.value===i.draggedNode.data.value&&(i.draggedNode.data=g,i.draggedNode.el=d),i&&i.draggedNodes.map(T=>T.data.value).includes(g.value)){const T=i.draggedNodes.find(m=>m.data.value===g.value);T&&(T.el=d)}r.push({el:d,data:g});const y={node:d,parent:e,parentData:a,nodeData:g};(t||!f)&&o.setupNode(y),Ce(y)}B.set(e,{...a,enabledNodes:r}),o.remapFinished(a)}function xt(){i&&(i.remapJustFinished=!0,i.affectedNodes=[])}function It(e){e.e instanceof DragEvent&&Pt({e:e.e,targetData:e.targetData})}function Vt(e,t,a){R([e],t),setTimeout(()=>{ae([e],t),R([e],a)})}function Ct(e){const t=Te(xe(e));return e.e.stopPropagation(),e.e.dataTransfer&&(e.e.dataTransfer.dropEffect="move",e.e.dataTransfer.effectAllowed="move",e.e.dataTransfer.setDragImage(e.targetData.node.el,e.e.offsetX,e.e.offsetY)),t}function Ve(e){if(!(e.e instanceof DragEvent)&&!(e.e instanceof TouchEvent))return!1;const t=e.targetData.parent.data.config;if(!t.dragHandle)return!0;const a=e.targetData.node.el.querySelectorAll(t.dragHandle);if(!a)return!1;const n=H(e.e),o=t.root.elementFromPoint(n.x,n.y);if(!o)return!1;for(const l of Array.from(a))if(o===l||l.contains(o))return!0;return!1}function _t(e){if(!Ve(e))return;const t=Lt(e);Ft(e,t),Kt(e,t)}function Pt(e){if(!Ve(e)){e.e.preventDefault();return}const t=e.targetData.parent.data.config,a=Ct(e),n=e.targetData.node.el.style.zIndex;a.originalZIndex=n,e.targetData.node.el.style.zIndex="9999",Vt(a.draggedNode.el,t.draggingClass,t.dropZoneClass)}function Et(e){i&&(e.detail.targetData.parent.el===i.lastParent.el?Be(e.detail,i):oe(e.detail,i))}function Bt(e){var a;const t=e.parentData.config;e.node.draggable=!0,e.nodeData.abortControllers.mainNode=Ne(e.node,{dragstart:L(t.handleDragstart),dragover:L(t.handleDragoverNode),dragenter:L(t.handleDragenterNode),dragleave:L(t.handleDragleaveNode),dragend:L(t.handleEnd),touchstart:L(t.handleTouchstart),touchmove:L(t.handleTouchmove),touchend:L(t.handleEnd),touchOverNode:t.handleTouchOverNode}),t.reapplyDragClasses(e.node,e.parentData),(a=e.parentData.config.plugins)==null||a.forEach(n=>{var o,l;(l=(o=n(e.parent))==null?void 0:o.setupNode)==null||l.call(o,e)})}function Ce(e){var t;$.set(e.node,e.nodeData),(t=e.parentData.config.plugins)==null||t.forEach(a=>{var n,o;(o=(n=a(e.parent))==null?void 0:n.setupNodeRemap)==null||o.call(n,e)})}function At(e,t){if(!i)return;const a="touchedNode"in i?t.config.touchDropZoneClass:t.config.dropZoneClass;i.draggedNode.el===e&&R([e],a,!0)}function $t(e){var t;(t=e.parentData.config.plugins)==null||t.forEach(a=>{var n,o;(o=(n=a(e.parent))==null?void 0:n.tearDownNodeRemap)==null||o.call(n,e)})}function St(e){var t,a,n,o,l;(t=e.parentData.config.plugins)==null||t.forEach(r=>{var s,d;(d=(s=r(e.parent))==null?void 0:s.tearDownNode)==null||d.call(s,e)}),e.node.draggable=!1,(n=(a=e.nodeData)==null?void 0:a.abortControllers)!=null&&n.mainNode&&((l=(o=e.nodeData)==null?void 0:o.abortControllers)==null||l.mainNode.abort())}function _e(e){i&&(Ot(e,i),vt())}function Ot(e,t){var l,r,s,d;document.removeEventListener("contextmenu",Pe),"longTouchTimeout"in t&&t.longTouchTimeout&&clearTimeout(t.longTouchTimeout);const a=(l=B.get(t.initialParent.el))==null?void 0:l.config,o="touchedNode"in t?a==null?void 0:a.touchDropZoneClass:a==null?void 0:a.dropZoneClass;t.originalZIndex!==void 0&&(t.draggedNode.el.style.zIndex=t.originalZIndex),R(t.draggedNodes.map(f=>f.el),o,!0),ae(t.draggedNodes.map(f=>f.el),o),a!=null&&a.longTouchClass&&ae(t.draggedNodes.map(f=>f.el),(s=(r=t.initialParent.data)==null?void 0:r.config)==null?void 0:s.longTouchClass),"touchedNode"in t&&((d=t.touchedNode)==null||d.remove())}function zt(e){e.e instanceof TouchEvent&&_t({e:e.e,targetData:e.targetData})}function Lt(e){e.e.stopPropagation();const t=e.targetData.node.el.cloneNode(!0),a=e.targetData.node.el.getBoundingClientRect();return Dt(Te(xe(e)),{coordinates:{x:e.e.touches[0].clientX,y:e.e.touches[0].clientY},scrollParent:ye(e.targetData.node.el),touchStartLeft:e.e.touches[0].clientX-a.left,touchStartTop:e.e.touches[0].clientY-a.top,touchedNode:t,touchMoving:!1})}function Pe(e){e.preventDefault()}function Ft(e,t){t.touchedNodeDisplay=t.touchedNode.style.display;const a=e.targetData.node.el.getBoundingClientRect();t.touchedNode.style.cssText=`
            width: ${a.width}px;
            position: fixed;
            pointer-events: none;
            top: -9999px;
            z-index: 999999;
            display: none;
          `,document.body.append(t.touchedNode),we(e.targetData.node.el,t.touchedNode),t.touchedNode.style.display="none",document.addEventListener("contextmenu",Pe)}function Kt(e,t){const a=e.targetData.parent.data.config;a.longTouch&&(t.longTouchTimeout=setTimeout(()=>{t&&(t.longTouch=!0,a.longTouchClass&&e.e.cancelable&&R(t.draggedNodes.map(n=>n.el),a.longTouchClass),e.e.preventDefault())},a.longTouchTimeout||200))}function Mt(e){!i||!("touchedNode"in i)||qt(e,i)}function Ut(e,t){t.longTouchClass&&ae(e.draggedNodes.map(a=>a.el),t==null?void 0:t.longTouchClass),t.touchDraggingClass&&R([e.touchedNode],t.touchDraggingClass),t.touchDropZoneClass&&R(e.draggedNodes.map(a=>a.el),t.touchDropZoneClass)}function Rt(e){if(!e||!e.scrollParent||e.scrollParent===document.documentElement&&!("touchedNode"in e))return;const{x:t,y:a,width:n,height:o}=e.scrollParent.getBoundingClientRect(),{x:l,y:r,scrollOutside:s}=e.lastParent.data.config.scrollBehavior;return{state:e,xThresh:l,yThresh:r,scrollOutside:s,scrollParent:e.scrollParent,x:t,y:a,width:n,height:o}}function Ht(e){const t=Rt(i);if(t)switch(e){case"down":return Yt(t.state,t);case"up":return Xt(t.state,t);case"right":return Zt(t.state,t);case"left":return Wt(t.state,t)}}function Zt(e,t){const a=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&a<0)&&a<(1-t.xThresh)*t.scrollParent.clientWidth&&!(t.scrollParent.scrollLeft+t.scrollParent.clientWidth>=t.scrollParent.scrollWidth))return e}function Wt(e,t){const a=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&a>t.scrollParent.clientWidth)&&a>t.xThresh*t.scrollParent.clientWidth&&t.scrollParent.scrollLeft!==0)return e}function Xt(e,t){const a=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&a>t.scrollParent.clientHeight)&&a>t.yThresh*t.scrollParent.clientHeight&&t.scrollParent.scrollTop!==0)return e}function Yt(e,t){const a=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&a<0)&&a<(1-t.yThresh)*t.scrollParent.clientHeight&&!(t.scrollParent.scrollTop+t.scrollParent.clientHeight>=t.scrollParent.scrollHeight))return e}function Jt(e,t){t.touchMoving=!0,t.touchedNode.style.display=t.touchedNodeDisplay||"";const{x:a,y:n}=H(e.e);t.coordinates.y=n,t.coordinates.x=a;const o=t.touchStartLeft??0,l=t.touchStartTop??0;t.touchedNode.style.left=`${a-o}px`,t.touchedNode.style.top=`${n-l}px`,Ut(t,e.targetData.parent.data.config)}function qt(e,t){if(e.targetData.parent.data.config.longTouch&&!t.longTouch){clearTimeout(t.longTouchTimeout);return}e.e.cancelable&&e.e.preventDefault(),Jt(e,t),ne();const n=bt(e);if(!n)return;const o={e:e.e,targetData:n};"node"in n?n.node.el.dispatchEvent(new CustomEvent("touchOverNode",{detail:o})):n.parent.el.dispatchEvent(new CustomEvent("touchOverParent",{detail:o}))}function ne(){for(const e of Object.keys(ue)){const[t,a]=ue[e];Ee(e,t,a)}}function Ee(e,t,a){const n=Ht(e);n&&(n.scrollParent.scrollBy(t,a),setTimeout(()=>{Ee(e,t,a)},"touchedNode"in n?10:100))}function jt(e){if(!i)return;const{x:t,y:a}=H(e.e);i.coordinates.y=a,i.coordinates.x=t,ne(),na(e,i)}function Gt(e){if(!i)return;const{x:t,y:a}=H(e.e);i.coordinates.y=a,i.coordinates.x=t,ne(),oe(e,i)}function Qt(e){i&&oe(e.detail,i)}function ea(e,t){if(e.targetData.parent.el===t.lastParent.el)return!1;const a=e.targetData.parent.data.config;if(a.dropZone===!1)return!1;const n=t.initialParent.data.config;return a.accepts?a.accepts(e.targetData.parent,t.initialParent,t.lastParent,t):!(!a.group||a.group!==n.group)}function ta(e,t){e.e.preventDefault()}function aa(e,t){e.e.preventDefault()}function na(e,t){var a;e.e.preventDefault(),e.e.stopPropagation(),e.targetData.parent.el===((a=t.lastParent)==null?void 0:a.el)?Be(e,t):oe(e,t)}function oa(e,t,a,n){var g;if(t.affectedNodes.map(y=>y.data.value).includes(e.targetData.node.data.value))return!1;if(t.remapJustFinished)return t.remapJustFinished=!1,(e.targetData.node.data.value===t.lastTargetValue||t.draggedNodes.map(y=>y.el).includes(e.targetData.node.el))&&(t.lastTargetValue=e.targetData.node.data.value),!1;if(t.draggedNodes.map(y=>y.el).includes(e.targetData.node.el))return t.lastTargetValue=void 0,!1;if(e.targetData.node.data.value===t.lastTargetValue||t.preventEnter||e.targetData.parent.el!==((g=t.lastParent)==null?void 0:g.el)||e.targetData.parent.data.config.sortable===!1)return!1;const o=e.targetData.node.el.getBoundingClientRect(),l=t.draggedNode.el.getBoundingClientRect(),r=o.y-l.y,s=o.x-l.x;let d;Math.abs(r)>Math.abs(s)?d=r>0?"above":"below":d=s>0?"left":"right";const f=t.lastParent.data.config.threshold;switch(d){case"left":if(a>o.x+o.width*f.horizontal)return t.incomingDirection="left",!0;break;case"right":if(a<o.x+o.width*(1-f.horizontal))return t.incomingDirection="right",!0;break;case"above":if(n>o.y+o.height*f.vertical)return t.incomingDirection="above",!0;break;case"below":if(n<o.y+o.height*(1-f.vertical))return t.incomingDirection="below",!0;break}return!1}function Be(e,t){const{x:a,y:n}=H(e.e);if(!oa(e,t,a,n))return;const o=t.draggedNode.data.index>e.targetData.node.data.index?[e.targetData.node.data.index,t.draggedNode.data.index]:[t.draggedNode.data.index,e.targetData.node.data.index];t.targetIndex=e.targetData.node.data.index,t.affectedNodes=e.targetData.parent.data.enabledNodes.filter(l=>o[0]<=l.data.index&&l.data.index<=o[1]&&l.el!==t.draggedNode.el),e.targetData.parent.data.config.performSort(t,e)}function L(e){function t(a){var r;const n=$.get(a),o=a.parentNode||((r=i==null?void 0:i.lastParent)==null?void 0:r.el);if(!n)return;const l=B.get(o);if(l)return{node:{el:a,data:n},parent:{el:o,data:l}}}return a=>{const n=t(a.currentTarget);if(n)return e({e:a,targetData:n})}}function Ae(e,t){const a=Ie(e),n=se(e.lastParent.el,e.lastParent.data).filter(s=>!a.includes(s)),o=se(t.targetData.parent.el,t.targetData.parent.data),l=e.initialParent.el===t.targetData.parent.el&&t.targetData.parent.data.config.sortable===!1;let r;"node"in t.targetData?(l?r=e.initialIndex:t.targetData.parent.data.config.sortable===!1?r=t.targetData.parent.data.enabledNodes.length:r=t.targetData.node.data.index,o.splice(r,0,...a)):(r=l?e.initialIndex:t.targetData.parent.data.enabledNodes.length,o.splice(r,0,...a)),ie(e.lastParent.el,e.lastParent.data,n),ie(t.targetData.parent.el,t.targetData.parent.data,o)}function oe(e,t){ea(e,t)&&(e.targetData.parent.data.config.performTransfer(t,e),t.lastParent=e.targetData.parent,t.transferred=!0)}function ra(e){function t(a){const n=B.get(a);if(n)return{parent:{el:a,data:n}}}return a=>{const n=t(a.currentTarget);if(n)return e({e:a,targetData:n})}}function fe(e){if(e instanceof HTMLElement)return e;if(e.value instanceof HTMLElement)return e.value;if("$el"in e&&e.$el instanceof HTMLElement)return e.$el}function la(e,t){Array.isArray(e)||(e=[e]);for(const a of e){const n=fe(a);if(n)return t(n);const o=W(a,l=>{if(!l)return;const r=fe(l);r?t(r):console.warn("Invalid parent element",l),o()})}}var ce=new WeakMap;function sa(e){const t=ce.get(e);return t?t.value:(console.warn("No values found for parent element"),[])}function ia(e,t){const a=ce.get(t);a&&(a.value=e)}function $e(e){De&&(Array.isArray(e)||(e=[e]),e.forEach(t=>{const{parent:a,values:n,...o}=t;la(a,da(o,n))}))}function da(e,t){return a=>{ce.set(a,t),Nt({parent:a,getValues:sa,setValues:ia,config:{...e,dropZones:[]}})}}const ca=w("p",{class:"mb-1 text-body-2 text-high-emphasis",style:{"line-height":"15px"}}," Assigned ",-1),ua=w("p",{class:"text-body-2 text-high-emphasis mb-1",style:{"line-height":"15px"}}," COMMENT ",-1),fa={class:"border rounded px-3 py-2"},ma={key:0,class:"d-flex justify-end flex-wrap gap-x-2"},pa=q({__name:"KanbanBoardEditDrawer",props:{kanbanItem:{default:()=>({item:{title:"",dueDate:"2022-01-01T00:00:00Z",labels:[],members:[],id:0,attachments:0,commentsCount:0,image:"",comments:""},boardId:0,boardName:""})},isDrawerOpen:{type:Boolean}},emits:["update:isDrawerOpen","update:kanbanItem","deleteKanbanItem"],setup(e,{emit:t}){const a=e,n=t,o=k(),l=["UX","Image","Code Review","Dashboard","App","Charts & Maps"],r=k(JSON.parse(JSON.stringify(a.kanbanItem.item))),s=I=>{var v;n("update:isDrawerOpen",I),I||(v=o.value)==null||v.reset()};W(()=>a.kanbanItem,()=>{r.value=JSON.parse(JSON.stringify(a.kanbanItem.item))},{deep:!0});const d=()=>{var I;(I=o.value)==null||I.validate().then(async v=>{var S;v.valid&&(n("update:kanbanItem",{item:r.value,boardId:a.kanbanItem.boardId,boardName:a.kanbanItem.boardName}),n("update:isDrawerOpen",!1),await Oe(),(S=o.value)==null||S.reset())})},f=()=>{n("deleteKanbanItem",{item:r.value,boardId:a.kanbanItem.boardId,boardName:a.kanbanItem.boardName}),n("update:isDrawerOpen",!1)},g={UX:"success",Image:"warning","Code Review":"error",Dashboard:"info",App:"secondary","Charts & Maps":"primary"},y=[{img:je,name:"John Doe"},{img:Ge,name:"Jane Smith"},{img:Qe,name:"Robert Johnson"},{img:et,name:"Lucy Brown"},{img:tt,name:"Mike White"},{img:at,name:"Anna Black"}],T=k(),m=He({content:"",extensions:[Ze,Je.configure({types:["heading","paragraph"]}),We.configure({placeholder:"Write a Comment..."}),Xe]}),C=k({altFormat:"j M, Y",altInput:!0,dateFormat:"Y-m-d"});return(I,v)=>{const S=Re,K=Ue,Z=Me,D=Ke,p=Se("IconBtn");return N(),A(st,{location:"end",width:370,temporary:"",border:"0","model-value":a.isDrawerOpen,"onUpdate:modelValue":s},{default:h(()=>[c(S,{title:"Edit Task",onCancel:v[0]||(v[0]=b=>I.$emit("update:isDrawerOpen",!1))}),c(nt),c(u(qe),{options:{wheelPropagation:!1},style:{"block-size":"calc(100vh - 4rem)"}},{default:h(()=>[u(r)?(N(),A(u(te),{key:0,ref_key:"refEditTaskForm",ref:o,onSubmit:X(d,["prevent"])},{default:h(()=>[c(me,{class:"kanban-editor-drawer"},{default:h(()=>[c(ot,null,{default:h(()=>[c(M,{cols:"12"},{default:h(()=>[c(K,{modelValue:u(r).title,"onUpdate:modelValue":v[1]||(v[1]=b=>u(r).title=b),label:"Title",rules:["requiredValidator"in I?I.requiredValidator:u(Q)]},null,8,["modelValue","rules"])]),_:1}),c(M,{cols:"12"},{default:h(()=>[c(Z,{modelValue:u(r).dueDate,"onUpdate:modelValue":v[2]||(v[2]=b=>u(r).dueDate=b),label:"Due date",config:u(C)},null,8,["modelValue","config"])]),_:1}),c(M,{cols:"12"},{default:h(()=>[c(D,{modelValue:u(r).labels,"onUpdate:modelValue":v[3]||(v[3]=b=>u(r).labels=b),items:l,label:"Label",multiple:"",eager:""},{chip:h(({item:b})=>[c(pe,{color:g[b.raw]},{default:h(()=>[E(F(b.raw),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"])]),_:1}),c(M,{cols:"12"},{default:h(()=>[ca,w("div",null,[c(rt,{modelValue:u(r).members,"onUpdate:modelValue":v[4]||(v[4]=b=>u(r).members=b),items:y,"item-title":"name","item-value":"name",multiple:"","return-object":"",variant:"plain","menu-props":{offset:10},class:"assignee-select"},{selection:h(({item:b})=>[c(ge,{size:"26"},{default:h(()=>[c(le,{src:b.raw.img},null,8,["src"]),c(he,{activator:"parent"},{default:h(()=>[E(F(b.raw.name),1)]),_:2},1024)]),_:2},1024)]),"prepend-inner":h(()=>[c(p,{size:"26",variant:"tonal",color:"secondary"},{default:h(()=>[c(V,{size:"20",icon:"tabler-plus"})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),c(M,{cols:"12"},{default:h(()=>[c(lt,{modelValue:u(T),"onUpdate:modelValue":v[5]||(v[5]=b=>Y(T)?T.value=b:null),"prepend-icon":"",multiple:"",variant:"outlined",label:"No file chosen",clearable:""},{append:h(()=>[c(U,{variant:"tonal"},{default:h(()=>[E(" Choose ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(M,{cols:"12"},{default:h(()=>[ua,w("div",fa,[c(u(Ye),{editor:u(m)},null,8,["editor"]),u(m)?(N(),_("div",ma,[c(V,{icon:"tabler-bold",color:u(m).isActive("bold")?"primary":"secondary",size:"20",onClick:v[6]||(v[6]=b=>u(m).chain().focus().toggleBold().run())},null,8,["color"]),c(V,{color:u(m).isActive("underline")?"primary":"secondary",icon:"tabler-underline",size:"20",onClick:v[7]||(v[7]=b=>u(m).commands.toggleUnderline())},null,8,["color"]),c(V,{color:u(m).isActive("italic")?"primary":"secondary",icon:"tabler-italic",size:"20",onClick:v[8]||(v[8]=b=>u(m).chain().focus().toggleItalic().run())},null,8,["color"]),c(V,{color:u(m).isActive({textAlign:"left"})?"primary":"secondary",icon:"tabler-align-left",size:"20",onClick:v[9]||(v[9]=b=>u(m).chain().focus().setTextAlign("left").run())},null,8,["color"]),c(V,{color:u(m).isActive({textAlign:"center"})?"primary":"secondary",icon:"tabler-align-center",size:"20",onClick:v[10]||(v[10]=b=>u(m).chain().focus().setTextAlign("center").run())},null,8,["color"]),c(V,{color:u(m).isActive({textAlign:"right"})?"primary":"secondary",icon:"tabler-align-right",size:"20",onClick:v[11]||(v[11]=b=>u(m).chain().focus().setTextAlign("right").run())},null,8,["color"])])):P("",!0)])]),_:1}),c(M,{cols:"12"},{default:h(()=>[c(U,{type:"submit",class:"me-4"},{default:h(()=>[E(" Update ")]),_:1}),c(U,{color:"error",variant:"tonal",onClick:f},{default:h(()=>[E(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)):P("",!0)]),_:1})]),_:1},8,["model-value"])}}}),ga={class:"d-flex align-start gap-2"},ha={key:0,class:"d-flex flex-wrap gap-2"},ba={class:"text-base text-high-emphasis mb-0"},va={class:"task-footer d-flex align-center flex-wrap justify-space-between"},Da={key:0,class:"d-flex align-center gap-4"},ya={key:0},Na={class:"text-body-1 d-inline-block"},wa={key:1},ka={class:"text-body-1 d-inline-block"},Ta={key:1,class:"v-avatar-group"},xa=q({__name:"KanbanCard",props:{item:{},boardId:{},boardName:{}},emits:["deleteKanbanItem"],setup(e,{emit:t}){const a=e,n=t,o={UX:"success",Image:"warning","Code Review":"error",Dashboard:"info",App:"secondary","Charts & Maps":"primary"},l=[{title:"Copy Task link",href:"#"},{title:"Duplicate Task",href:"#"},{title:"Delete",onClick:()=>{n("deleteKanbanItem",{item:a.item,boardId:a.boardId,boardName:a.boardName})}}];return(r,s)=>r.item?(N(),A(ft,{key:0,ripple:!1,link:!1,class:"kanban-card position-relative"},{default:h(()=>[c(me,{class:"d-flex flex-column gap-2"},{default:h(()=>[w("div",ga,[r.item.labels&&r.item.labels.length?(N(),_("div",ha,[(N(!0),_(J,null,ee(r.item.labels,d=>(N(),A(pe,{key:d,size:"small",color:o[d]},{default:h(()=>[E(F(d),1)]),_:2},1032,["color"]))),128))])):P("",!0),c(dt),c(ct,null,{activator:h(({props:d,isActive:f})=>[c(V,ze(d,{icon:"tabler-dots-vertical",class:"position-absolute more-options",style:[{"inset-block-start":"16px","inset-inline-end":"10px"},f?"opacity: 1":""],size:"20",onClick:s[0]||(s[0]=X(()=>{},["stop"]))}),null,16,["style"])]),default:h(()=>[c(ut,{items:l,"item-props":""})]),_:1})]),r.item.image&&r.item.image.length?(N(),A(le,{key:0,src:r.item.image,class:"rounded"},null,8,["src"])):P("",!0),w("p",ba,F(r.item.title),1),w("div",va,[r.item.attachments||r.item.commentsCount?(N(),_("div",Da,[r.item.attachments?(N(),_("div",ya,[c(V,{size:"20",icon:"tabler-paperclip",class:"me-1"}),w("span",Na,F(r.item.attachments),1)])):P("",!0),r.item.commentsCount?(N(),_("div",wa,[c(V,{size:"20",icon:"tabler-message-2",class:"me-1"}),w("span",ka,F(r.item.commentsCount),1)])):P("",!0)])):P("",!0),r.item.members&&r.item.members.length?(N(),_("div",Ta,[(N(!0),_(J,null,ee(r.item.members,d=>(N(),A(ge,{key:d.name,size:"30"},{default:h(()=>[c(le,{src:d.img},null,8,["src"]),c(he,{activator:"parent"},{default:h(()=>[E(F(d.name),1)]),_:2},1024)]),_:2},1024))),128))])):P("",!0)])]),_:1})]),_:1})):P("",!0)}}),Ia=mt(xa,[["__scopeId","data-v-e9b15474"]]),Va={class:"kanban-board"},Ca={class:"kanban-board-header pb-4"},_a={key:1,class:"d-flex align-center justify-space-between"},Pa={class:"text-lg font-weight-medium text-truncate"},Ea={class:"d-flex align-center"},Ba={class:"add-new-form"},Aa={class:"mb-4"},$a={class:"d-flex gap-4 flex-wrap"},Sa=q({__name:"KanbanItems",props:{kanbanIds:{},groupName:{},boardName:{},boardId:{},kanbanData:{}},emits:["renameBoard","deleteBoard","addNewItem","editItem","updateItemsState","deleteItem"],setup(e,{emit:t}){const a=e,n=t,o=k(),l=k(a.boardName),r=k(a.kanbanIds),s=k(!1),d=k(!1),f=k(),g=k(""),y=k(),T=[{title:"Rename",prependIcon:"tabler-pencil",onClick:()=>{d.value=!0}},{title:"Delete",prependIcon:"tabler-trash",onClick:()=>n("deleteBoard",a.boardId)}],m=()=>{var D;(D=y.value)==null||D.validate().then(p=>{p.valid&&(n("renameBoard",{oldName:a.boardName,newName:l.value,boardId:a.boardId}),d.value=!1)})},C=()=>{var D;(D=f.value)==null||D.validate().then(p=>{p.valid&&(n("addNewItem",{itemTitle:g.value,boardName:a.boardName,boardId:a.boardId}),s.value=!1,g.value="")})};$e({parent:o,values:r,group:a.groupName,draggable:D=>D.classList.contains("kanban-card"),plugins:[ke()],performTransfer:(D,p)=>{Ae(D,p),n("updateItemsState",{boardId:a.boardId,ids:r.value})},handleEnd:D=>{_e(D),n("updateItemsState",{boardId:a.boardId,ids:r.value})}}),W(()=>a,()=>{r.value=a.kanbanIds},{immediate:!0,deep:!0});const I=D=>a.kanbanData.items.find(p=>p.id===D),v=D=>{n("deleteItem",D)},S=()=>{var D;s.value=!1,(D=f.value)==null||D.reset()};re(f,S),re(y,()=>{d.value=!1});const K=()=>{d.value=!1,l.value=a.boardName},Z=D=>{D.key==="Enter"&&!D.shiftKey&&C()};return(D,p)=>{const b=it;return N(),_("div",Va,[w("div",Ca,[u(d)?(N(),A(u(te),{key:0,ref_key:"refKanbanBoardTitle",ref:y,onSubmit:X(m,["prevent"])},{default:h(()=>[c(be,{modelValue:u(l),"onUpdate:modelValue":p[0]||(p[0]=x=>Y(l)?l.value=x:null),autofocus:"",variant:"underlined",rules:["requiredValidator"in D?D.requiredValidator:u(Q)],"hide-details":"",class:"border-0",onKeydown:G(K,["esc"])},{"append-inner":h(()=>[c(V,{size:"20",color:"success",icon:"tabler-check",class:"me-1",onClick:m}),c(V,{size:"20",color:"error",icon:"tabler-x",onClick:K})]),_:1},8,["modelValue","rules"])]),_:1},512)):(N(),_("div",_a,[w("h4",Pa,F(D.boardName),1),w("div",Ea,[c(V,{class:"drag-handler",size:"20",icon:"tabler-arrows-move"}),c(b,{size:"28","icon-size":"20",class:"text-high-emphasis","menu-list":T,"item-props":""})])]))]),u(r)?(N(),_("div",{key:0,ref_key:"refKanbanBoard",ref:o,class:Le(["kanban-board-drop-zone rounded d-flex flex-column gap-4",u(r).length?"mb-4":""])},[(N(!0),_(J,null,ee(u(r),x=>(N(),A(Ia,{key:x,item:I(x),"board-id":a.boardId,"board-name":a.boardName,onDeleteKanbanItem:v,onClick:Ma=>n("editItem",{item:I(x),boardId:a.boardId,boardName:a.boardName})},null,8,["item","board-id","board-name","onClick"]))),128)),w("div",Ba,[w("h6",{class:"text-base font-weight-regular cursor-pointer ms-4",onClick:p[1]||(p[1]=x=>s.value=!u(s))},[c(V,{size:"15",icon:"tabler-plus"}),E(" Add New Item ")]),u(s)?(N(),A(u(te),{key:0,ref_key:"refForm",ref:f,class:"mt-4","validate-on":"submit",onSubmit:X(C,["prevent"])},{default:h(()=>[w("div",Aa,[c(pt,{modelValue:u(g),"onUpdate:modelValue":p[2]||(p[2]=x=>Y(g)?g.value=x:null),rules:["requiredValidator"in D?D.requiredValidator:u(Q)],placeholder:"Add Content",autofocus:"",rows:"2",onKeydown:[G(Z,["enter"]),G(S,["esc"])]},null,8,["modelValue","rules"])]),w("div",$a,[c(U,{size:"small",type:"submit"},{default:h(()=>[E(" Add ")]),_:1}),c(U,{size:"small",variant:"tonal",color:"secondary",onClick:S},{default:h(()=>[E(" Cancel ")]),_:1})])]),_:1},512)):P("",!0)])],2)):P("",!0)])}}}),Oa={class:"kanban-main-wrapper d-flex gap-4 h-100"},za={class:"add-new-form text-no-wrap",style:{"inline-size":"10rem"}},La={class:"mb-4"},Fa={class:"d-flex gap-3"},Ka=q({__name:"KanbanBoard",props:{kanbanData:{},groupName:{default:"kanban"}},emits:["addNewBoard","renameBoard","deleteBoard","addNewItem","editItem","deleteItem","updateItemsState","updateBoardState"],setup(e,{emit:t}){const a=e,n=t,o=k(),l=k(a.kanbanData.boards),r=k(!1),s=k(!1),d=k(),f=k(""),g=k(),y=()=>{var p;(p=d.value)==null||p.validate().then(b=>{b.valid&&(n("addNewBoard",f.value),s.value=!1,f.value="")})},T=p=>{n("deleteBoard",p)},m=p=>{n("renameBoard",p)},C=p=>{n("addNewItem",p)},I=p=>{p&&(g.value=p,r.value=!0)},v=p=>{n("updateItemsState",p)};$e({parent:o,values:l,dragHandle:".drag-handler",plugins:[ke()]}),W(()=>a,()=>{l.value=a.kanbanData.boards,de(o.value)},{deep:!0});const S=p=>{n("editItem",p)},K=p=>{n("deleteItem",p)};W(l,()=>{const p=l.value.map(b=>b.id);n("updateBoardState",p)},{deep:!0});const Z=()=>a.kanbanData.boards.some(p=>f.value&&p.title.toLowerCase()===f.value.toLowerCase())?"Board title already exists":!0,D=()=>{var p;s.value=!1,(p=d.value)==null||p.reset()};return re(d,D),(p,b)=>(N(),_(J,null,[w("div",Oa,[w("div",{ref_key:"kanbanWrapper",ref:o,class:"d-flex ga-6"},[(N(!0),_(J,null,ee(u(l),x=>(N(),A(Sa,{key:x.id,"group-name":p.groupName,"kanban-ids":x.itemsIds,"board-name":x.title,"board-id":x.id,"kanban-items":p.kanbanData.items,"kanban-data":p.kanbanData,onDeleteBoard:T,onRenameBoard:m,onAddNewItem:C,onEditItem:I,onUpdateItemsState:v,onDeleteItem:K},null,8,["group-name","kanban-ids","board-name","board-id","kanban-items","kanban-data"]))),128))],512),w("div",za,[w("h6",{class:"text-lg font-weight-medium cursor-pointer",onClick:b[0]||(b[0]=x=>s.value=!u(s))},[c(V,{size:"18",icon:"tabler-plus"}),E(" Add New ")]),u(s)?(N(),A(u(te),{key:0,ref_key:"refAddNewBoard",ref:d,class:"mt-4","validate-on":"submit",onSubmit:X(y,["prevent"])},{default:h(()=>[w("div",La,[c(be,{modelValue:u(f),"onUpdate:modelValue":b[1]||(b[1]=x=>Y(f)?f.value=x:null),rules:["requiredValidator"in p?p.requiredValidator:u(Q),Z],autofocus:"",placeholder:"Add Board Title",onKeydown:G(D,["esc"])},null,8,["modelValue","rules"])]),w("div",Fa,[c(U,{size:"small",type:"submit"},{default:h(()=>[E(" Add ")]),_:1}),c(U,{size:"small",variant:"tonal",color:"secondary",type:"reset",onClick:D},{default:h(()=>[E(" Cancel ")]),_:1})])]),_:1},512)):P("",!0)])]),c(pa,{"is-drawer-open":u(r),"onUpdate:isDrawerOpen":b[2]||(b[2]=x=>Y(r)?r.value=x:null),"kanban-item":u(g),"onUpdate:kanbanItem":S,onDeleteKanbanItem:K},null,8,["is-drawer-open","kanban-item"])],64))}}),Hn=q({__name:"index",async setup(e){let t,a;const{data:n,execute:o}=([t,a]=Fe(()=>gt("/apps/kanban")),t=await t,a(),t),l=async m=>{await z("/apps/kanban/board/add",{method:"POST",body:{title:m}}),o()},r=async m=>{await z(`/apps/kanban/board/${m}`,{method:"DELETE"}),o()},s=async m=>{await z("/apps/kanban/board/rename",{method:"PUT",body:m}),o()},d=async m=>{await z("/apps/kanban/item/add",{method:"POST",body:m}),o()},f=async m=>{await z("/apps/kanban/item/update",{method:"PUT",body:m}),o()},g=async m=>{m.item&&m.item.id&&(await z(`/apps/kanban/item/${m.item.id}`,{method:"DELETE",body:m}),o())},y=async m=>{await z("/apps/kanban/item/state-update",{method:"PUT",body:m})},T=async m=>{await z("/apps/kanban/board/state-update",{method:"PUT",body:m})};return(m,C)=>u(n)?(N(),A(Ka,{key:0,"kanban-data":u(n),onAddNewBoard:l,onDeleteBoard:r,onRenameBoard:s,onAddNewItem:d,onEditItem:f,onDeleteItem:g,onUpdateItemsState:y,onUpdateBoardState:T},null,8,["kanban-data"])):P("",!0)}});export{Hn as default};
